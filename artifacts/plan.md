# План внедрения модельно-ориентированного подхода к разработке

## 1. Создание нового проекта с использованием модельно-ориентированного подхода

### Фаза 1: Подготовка и настройка проекта
*   **Шаг 1.1:** Определение и документирование стандартной структуры проекта Flutter.
    *   Создать структуру директорий для `core`, `features` (с поддиректориями `bloc`, `models`, `screens`, `services`, `widgets`), `artifacts` (для MMD, документации по требованиям), `test`.
*   **Шаг 1.2:** Выбор и настройка инструментов для XState.
    *   Установить и настроить XState Viz и плагины для IDE (например, VSCode).
*   **Шаг 1.3:** Выбор и настройка инструментов для MMD (Mermaid).
    *   Установить и настроить Mermaid Live Editor и плагины для IDE.
*   **Шаг 1.4:** Разработка (или выбор) инструментов/скриптов/шаблонов для генерации каркаса Flutter BLoC из XState-определений.
    *   Цель: автоматизировать создание файлов `_bloc.dart`, `_event.dart`, `_state.dart`.
*   **Шаг 1.5:** Определение и документирование соглашений по именованию артефактов.
    *   Установить правила для имен XState-машин, BLoC файлов, MMD-диаграмм и т.д.

### Фаза 2: Разработка первой фичи (или основного модуля) проекта

*   **Подфаза 2.1: Проектирование и Моделирование**
    *   **Шаг 2.1.1:** Сбор и документирование первоначальных требований и пользовательских историй для фичи.
    *   **Шаг 2.1.2:** Проектирование конечного автомата логики фичи в XState (создание файла `feature_name_machine.ts`).
        *   Определить состояния, события, переходы, контекст, действия, сервисы, условия.
        *   Визуализировать и отладить с помощью XState Viz.
    *   **Шаг 2.1.3:** Создание MMD-диаграмм архитектуры и взаимодействий фичи (создание файлов `feature_name_architecture.mmd` и др.).

*   **Подфаза 2.2: Реализация**
    *   **Шаг 2.2.1:** Генерация/написание кода Flutter BLoC (события, состояния, блок) на основе XState-машины.
    *   **Шаг 2.2.2:** Реализация UI-виджетов фичи, взаимодействующих с BLoC.
    *   **Шаг 2.2.3:** Реализация необходимых сервисов для фичи.

*   **Подфаза 2.3: Документирование и Тестирование**
    *   **Шаг 2.3.1:** Формализация/генерация детальных функциональных требований на основе XState-машины и пользовательских историй (например, в `artifacts/feature_name/README.md`).
    *   **Шаг 2.3.2:** Проектирование и реализация юнит-тестов для BLoC (покрытие переходов, действий, условий XState).
    *   **Шаг 2.3.3:** Проектирование и реализация виджет-тестов (покрытие UI в различных состояниях BLoC).
    *   **Шаг 2.3.4 (Опционально):** Проектирование и реализация E2E тестов.
    *   **Шаг 2.3.5:** Актуализация всех артефактов проектирования (XState, MMD, документации) при необходимости.

## 2. Добавление новой фичи в существующий проект с использованием модельно-ориентированного подхода

### Фаза 1: Инициация фичи
*   **Шаг 1.1:** Определение скоупа и высокоуровневых требований для новой фичи.
*   **Шаг 1.2:** Анализ влияния новой фичи на существующую архитектуру и определение точек интеграции.

### Фаза 2: Проектирование и Моделирование новой фичи
*   **Шаг 2.1:** Создание XState-машины для логики новой фичи.
    *   Разместить файл, например, в `lib/features/new_feature_name/bloc/new_feature_name_machine.ts`.
*   **Шаг 2.2:** Создание/обновление MMD-диаграмм.
    *   Создать диаграммы для новой фичи в `artifacts/new_feature_name/`.
    *   При необходимости, обновить общую архитектурную диаграмму проекта.

### Фаза 3: Реализация новой фичи
*   **Шаг 3.1:** Генерация/написание кода Flutter BLoC, событий, состояний для новой фичи на основе ее XState-машины.
*   **Шаг 3.2:** Реализация UI (экраны, виджеты) и сервисов для новой фичи.
*   **Шаг 3.3:** Интеграция модуля новой фичи в существующее приложение.
    *   Настроить навигацию.
    *   Настроить внедрение зависимостей (DI).
    *   Обеспечить взаимодействие с другими BLoC/сервисами, если необходимо.

### Фаза 4: Документирование и Тестирование новой фичи
*   **Шаг 4.1:** Создание/обновление документа с детальными функциональными требованиями для новой фичи (например, `artifacts/new_feature_name/README.md`), используя XState-машину.
*   **Шаг 4.2:** Проектирование и реализация юнит-тестов для BLoC новой фичи.
*   **Шаг 4.3:** Проектирование и реализация виджет-тестов для UI новой фичи.
*   **Шаг 4.4 (Опционально):** Проектирование и реализация интеграционных/E2E тестов для новой фичи.
*   **Шаг 4.5:** Актуализация всех артефактов проектирования (XState, MMD, документации) при необходимости.
